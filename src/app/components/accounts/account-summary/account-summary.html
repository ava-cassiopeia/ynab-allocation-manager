<div class="account-name">
  {{ account().account.name }}
</div>
<div class="allocation">
  @if (hasAllocations()) {
    @if (delta() > 0) {
      <ya-dropdown-button dropdownLabel="Excess" theme="overage">
        <ya-currency label [milliunits]="delta()" />

        <p dropdown class="info-text">
          You have <b><ya-currency label [milliunits]="delta()" /></b> excess in
          this account compared to the required allocation.
        </p>
      </ya-dropdown-button>
    } @else if (delta() < 0) {
      <ya-dropdown-button dropdownLabel="Missing funds" theme="warning">
        <ya-currency label [milliunits]="delta() * -1" />

        <p dropdown class="info-text">
          You don't have enough money in this account to match your allocations.
          Transfer another <b><ya-currency [milliunits]="delta() * -1" /></b> to
          this account to fix this.
        </p>
      </ya-dropdown-button>
    }
  }

  <ya-dropdown-button dropdownLabel="Allocation" [theme]="allocationsTheme()">
    <div label class="allocation-label">
      <ya-currency [milliunits]="allocatedAmount()" />
      &sol;
      <ya-currency [milliunits]="account().account.cleared_balance" />
    </div>

    <div dropdown>
      <div class="allocation-table">
        <div>&nbsp;</div>
        <div>Balance:</div>
        <ya-currency [milliunits]="account().account.cleared_balance" />

        <div class="allocated">-</div>
        <div class="allocated">Allocated ({{ account().categories.length }}):</div>
        <ya-currency class="allocated" [milliunits]="allocatedAmount()" />

        <div>=</div>
        <div>&nbsp;</div>
        <ya-currency [milliunits]="delta()" />
      </div>
    </div>
  </ya-dropdown-button>
</div>
